let pokemonRepository = function () { let e = [], t = "https://pokeapi.co/api/v2/pokemon/?limit=150"; function n(t) { "object" == typeof t ? e.push(t) : document.write("not a pokemon") } function o(e) { let t = e.detailsUrl; return fetch(t).then(function (e) { return e.json() }).then(function (t) { e.imageUrl = t.sprites.front_default, e.height = t.height, e.types = t.types, e.weight = t.weight }).catch(function (e) { console.error(e) }) } return { add: n, getAll: function () { return e }, addListItem: function (e) { let t = document.querySelector(".pokemon-list"), n = document.createElement("li"), i = document.createElement("button"); i.addEventListener("click", function () { !function (e) { o(e).then(function () { !function (e) { let t = document.querySelector(".modal-title"), n = document.querySelector(".modal-body"); t.innerHTML = "", n.innerHTML = ""; let o = document.createElement("h5"); o.innerHTML = e.name; let i = document.createElement("p"); i.innerHTML = "Height: " + e.height; let c = document.createElement("p"); c.innerHTML = "Type: " + e.types; let r = document.createElement("p"); r.innerHTML = "Weight: " + e.weight; let l = document.createElement("img"); l.src = e.imageUrl, t.append(o), n.append(l), n.append(i), n.append(r), n.append(c) }(e), console.log(e) }) }(e) }), i.innerText = e.name, i.classList.add("btn", "btn-success"), i.setAttribute("data-toggle", "modal"), i.setAttribute("data-target", "#poModal"), n.classList.add("list-group-item"), n.appendChild(i), t.appendChild(n) }, loadList: function () { return fetch(t).then(function (e) { return e.json() }).then(function (e) { e.results.forEach(function (e) { n({ name: e.name, detailsUrl: e.url }) }) }).catch(function (e) { console.error(e) }) }, loadDetails: o } }(); pokemonRepository.loadList().then(function () { pokemonRepository.getAll().forEach(function (e) { pokemonRepository.addListItem(e) }) });